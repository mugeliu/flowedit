<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试 Create Style API</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: #f5f7fa; 
            padding: 20px;
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 30px; 
            text-align: center; 
        }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 16px; }
        .content { padding: 30px; }
        .test-section { 
            border: 1px solid #e1e8ed; 
            border-radius: 8px; 
            margin-bottom: 25px; 
            overflow: hidden;
        }
        .section-header { 
            background: #f8fafc; 
            padding: 15px 20px; 
            border-bottom: 1px solid #e1e8ed; 
            font-weight: 600; 
            color: #2c3e50;
        }
        .section-content { padding: 20px; }
        .form-group { margin-bottom: 20px; }
        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 500; 
            color: #374151; 
        }
        input, textarea { 
            width: 100%; 
            padding: 12px 16px; 
            border: 2px solid #e5e7eb; 
            border-radius: 8px; 
            font-size: 14px; 
            transition: all 0.3s;
        }
        input:focus, textarea:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        textarea { 
            min-height: 120px; 
            resize: vertical; 
            font-family: 'Monaco', 'Courier New', monospace;
        }
        .btn { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 16px;
            transition: all 0.3s;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3); }
        .btn:disabled { 
            background: #9ca3af; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none; 
        }
        .result { 
            background: #f8fafc; 
            border: 1px solid #e5e7eb; 
            border-radius: 8px; 
            padding: 20px; 
            margin-top: 20px; 
            white-space: pre-wrap; 
            font-family: 'Monaco', 'Courier New', monospace; 
            font-size: 12px; 
            max-height: 400px; 
            overflow-y: auto;
        }
        .success { border-color: #10b981; background-color: #ecfdf5; }
        .error { border-color: #ef4444; background-color: #fef2f2; }
        .warning { border-color: #f59e0b; background-color: #fffbeb; }
        .status { 
            padding: 8px 12px; 
            border-radius: 6px; 
            font-size: 12px; 
            font-weight: 600; 
            margin-bottom: 15px;
        }
        .status.loading { background: #dbeafe; color: #1d4ed8; }
        .status.success { background: #dcfce7; color: #166534; }
        .status.error { background: #fee2e2; color: #991b1b; }
        .preview-section { 
            background: #ffffff; 
            border: 2px solid #e5e7eb; 
            border-radius: 8px; 
            padding: 20px; 
            margin-top: 20px; 
        }
        .preview-header { 
            color: #374151; 
            font-weight: 600; 
            margin-bottom: 15px; 
            padding-bottom: 10px; 
            border-bottom: 1px solid #e5e7eb;
        }
        .quick-tests { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 10px; 
            margin-bottom: 20px; 
        }
        .quick-test { 
            background: #f1f5f9; 
            padding: 10px; 
            border-radius: 6px; 
            cursor: pointer; 
            transition: all 0.2s; 
            text-align: center;
            font-size: 13px;
        }
        .quick-test:hover { background: #e2e8f0; }
        .api-info { 
            background: #eff6ff; 
            border-left: 4px solid #3b82f6; 
            padding: 15px; 
            margin-bottom: 25px; 
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎨 Create Style API 测试器</h1>
            <p>创建新的风格主题并生成样式化HTML内容</p>
        </div>

        <div class="content">
            <div class="api-info">
                <strong>API端点:</strong> POST /api/v1/styles/create<br>
                <strong>功能:</strong> 根据用户提供的原始内容和风格描述，生成新的风格DNA并输出样式化HTML
            </div>

            <div class="test-section">
                <div class="section-header">📝 API配置</div>
                <div class="section-content">
                    <div class="form-group">
                        <label for="apiBase">API基础地址</label>
                        <input type="text" id="apiBase" value="http://localhost:8000/api" placeholder="http://localhost:8000/api">
                    </div>
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">🚀 快速风格测试</div>
                <div class="section-content">
                    <div class="quick-tests">
                        <div class="quick-test" onclick="loadStyleCase('minimal')">极简商务</div>
                        <div class="quick-test" onclick="loadStyleCase('tech')">科技未来</div>
                        <div class="quick-test" onclick="loadStyleCase('elegant')">优雅文艺</div>
                        <div class="quick-test" onclick="loadStyleCase('vibrant')">活力动感</div>
                        <div class="quick-test" onclick="loadStyleCase('professional')">专业权威</div>
                        <div class="quick-test" onclick="loadStyleCase('creative')">创意设计</div>
                        <div class="quick-test" onclick="loadStyleCase('simple')">简单测试</div>
                    </div>
                    <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin-top: 15px; font-size: 14px; color: #0c4a6e;">
                        💡 <strong>提示：</strong>内容已固定为FlowEdit产品介绍，你只需要选择不同的风格进行测试，体验各种排版效果！
                    </div>
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">📋 请求参数</div>
                <div class="section-content">
                    <div class="form-group">
                        <label for="themeName">主题名称 (theme_name)</label>
                        <input type="text" id="themeName" placeholder="例如：现代简约、商务专业、文艺清新" value="测试风格">
                    </div>

                    <div class="form-group">
                        <label for="themeDescription">主题描述 (theme_description)</label>
                        <textarea id="themeDescription" placeholder="详细描述风格特点，如颜色偏好、字体风格、布局特点等">简洁现代的设计风格，使用蓝色系配色，清爽的字体，适合商务和技术内容展示</textarea>
                    </div>

                    <div class="form-group">
                        <label for="rawContent">预设内容 (FlowEdit产品介绍 - 简单测试时可编辑)</label>
                        <textarea id="rawContent" style="background: #f8fafc; color: #6b7280;"># FlowEdit - 重新定义微信公众号内容创作体验

## 产品概述

FlowEdit 是一款革命性的 Chrome 浏览器扩展，专为微信公众号创作者设计。通过深度集成现代化的 Editor.js 编辑器和 AI 智能功能，FlowEdit 将传统的公众号编辑体验提升到全新高度。

### 为什么选择 FlowEdit？

在内容创作的时代，**效率**和**质量**是每个创作者追求的目标。FlowEdit 正是为解决这一痛点而生：

- 告别繁琐的格式调整，专注内容本身
- 智能化的排版建议，让文章更具专业感
- 丰富的模板库，快速开启创作灵感
- 一键风格化，打造独特的品牌形象

## 核心功能特性

### 🎨 现代化编辑体验

基于 **Editor.js** 的块级编辑器，提供：

- 拖拽式内容组织
- 实时预览效果
- 多媒体内容支持
- 快捷键操作体验

### 🤖 AI 智能辅助

集成先进的人工智能技术：

- **智能排版优化**: 自动调整段落间距、字体搭配
- **风格一致性**: 确保全文风格统一协调
- **内容结构建议**: AI 分析内容逻辑，提供结构优化建议
- **多风格适配**: 商务、文艺、科技等多种预设风格

### 📱 微信平台深度适配

完美兼容微信公众号平台特性：

- 严格遵循微信 HTML 规范
- 移动端阅读优化
- 保留平台原生功能
- 无缝集成工作流程

### 🎯 智能侧边栏管理

高效的内容管理界面：

- **历史文章管理**: 快速查看和编辑历史内容
- **模板库**: 丰富的文章模板，一键应用
- **风格预设**: 保存和复用个人风格配置
- **实时预览**: 所见即所得的编辑体验

## 技术架构亮点

### 先进的多构建系统

FlowEdit 采用现代化的工程架构：

```
多构建配置
├── vite.content.config.js    # 内容脚本构建
├── vite.editorjs.config.js   # Editor.js 工具集
└── vite.react.config.js      # React 应用界面
```

### 插件化架构设计

- **模块化开发**: 功能组件独立可扩展
- **插件注册机制**: 灵活的功能扩展体系
- **生命周期管理**: 完善的插件生命周期控制

### 现代技术栈

#### 前端技术

- **React 19** + TypeScript: 现代化的用户界面
- **Vite**: 快速的构建和开发体验  
- **Tailwind CSS** + shadcn/ui: 一致的设计系统
- **Editor.js**: 强大的块级编辑器核心

#### 扩展技术

- **Manifest V3**: 最新的浏览器扩展标准
- **Chrome APIs**: 深度集成浏览器能力
- **Service Worker**: 高效的后台处理

## 使用场景

### 💼 企业品牌传播

- **品牌一致性**: 统一的视觉风格和排版标准
- **专业形象**: 精美的版式设计提升品牌形象
- **批量制作**: 模板化内容快速生产

### ✍️ 个人内容创作

- **创作效率**: 智能化工具减少重复劳动
- **灵感激发**: 丰富的模板和样式选择
- **个性表达**: 自定义风格展现独特个性

### 📚 知识分享与教育

- **结构化内容**: 清晰的层次结构便于阅读理解
- **多媒体支持**: 图文并茂的内容表现形式
- **移动优化**: 适配手机阅读习惯

### 🎯 营销推广活动

- **视觉冲击**: 精美的版式设计抓住读者注意力
- **转化优化**: 专业的排版提升内容可信度
- **快速迭代**: 模板化制作支持营销活动快速响应

## 产品优势

### 🚀 显著提升创作效率

- 传统编辑器操作时间减少 **70%**
- 格式调整工作量降低 **80%**  
- 内容发布准备时间缩短 **60%**

### 🎨 专业级视觉效果

- 媲美专业设计师的排版质量
- 多种预设风格适应不同场景
- AI 智能配色和字体搭配建议

### 🔧 完善的工具生态

- 丰富的第三方插件支持
- 开放的 API 接口
- 活跃的社区和文档支持

### 📈 数据驱动优化

- 详细的编辑行为分析
- 内容效果追踪
- 持续的产品优化迭代

## 开始使用 FlowEdit

### 安装步骤

1. **下载扩展**: 从 Chrome 网上应用店搜索 "FlowEdit"
2. **安装激活**: 一键安装，立即生效
3. **打开微信**: 访问微信公众号后台编辑界面
4. **开始创作**: 享受全新的内容创作体验

### 快速上手

- **5分钟教程**: 交互式引导快速掌握核心功能
- **视频教程**: 详细的功能演示和最佳实践
- **社区支持**: 活跃的用户社区和技术支持

## 未来展望

FlowEdit 致力于成为内容创作领域的**智能助手**，我们正在开发更多激动人心的功能：

### 即将推出

- **AI 内容生成**: 基于主题的智能内容创作
- **多平台支持**: 扩展到更多内容创作平台
- **团队协作**: 支持多人协同编辑和审核流程
- **数据分析**: 深度的内容效果分析和优化建议

### 长远规划

- **个性化 AI**: 学习用户偏好的智能创作助手
- **内容生态**: 打造完整的内容创作和分发生态
- **国际化**: 支持更多语言和地区
- **企业版**: 面向大型组织的定制化解决方案

---

**FlowEdit** - *让内容创作更简单，让表达更精彩*

> 加入我们，一起重新定义内容创作的未来！</textarea>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">🔧 执行测试</div>
                <div class="section-content">
                    <button class="btn" onclick="testCreateStyle()" id="testBtn">
                        🎨 创建风格主题 (基于FlowEdit内容)
                    </button>
                    
                    <div id="status"></div>
                    <div id="result" class="result" style="display: none;"></div>
                </div>
            </div>

            <div class="test-section" id="previewSection" style="display: none;">
                <div class="section-header">🎨 生成的HTML预览</div>
                <div class="section-content">
                    <div class="preview-section">
                        <div class="preview-header">HTML渲染效果:</div>
                        <div id="htmlPreview"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentApiBase = 'http://localhost:8000/api';

        // 更新API基础地址
        document.getElementById('apiBase').addEventListener('change', function() {
            currentApiBase = this.value;
        });

        // 风格测试用例数据
        const stylesCases = {
            minimal: {
                themeName: '极简商务',
                themeDescription: '极简主义设计理念，使用黑白灰经典配色，简洁的线条和大量留白，专注内容表达，适合商务和专业场景'
            },
            tech: {
                themeName: '科技未来',
                themeDescription: '现代科技感设计，深蓝色渐变背景，霓虹蓝色强调色，几何线条装饰，体现创新和技术前沿感'
            },
            elegant: {
                themeName: '优雅文艺',
                themeDescription: '文艺优雅风格，温暖的米色和深棕色搭配，优雅的衬线字体，适度的装饰元素，营造知性和文艺氛围'
            },
            vibrant: {
                themeName: '活力动感',
                themeDescription: '充满活力的设计，橙红色和黄色的撞色搭配，动感的渐变效果，现代化的无衬线字体，适合活动和推广'
            },
            professional: {
                themeName: '专业权威',
                themeDescription: '权威专业风格，深蓝色主色调配合金色点缀，稳重的字体选择，严谨的排版，体现专业性和可信度'
            },
            creative: {
                themeName: '创意设计',
                themeDescription: '创意十足的设计风格，多彩渐变色彩，不规则几何图形装饰，现代艺术感排版，展现创新和想象力'
            },
            simple: {
                themeName: '简单测试',
                themeDescription: '简单的测试风格，用于调试API',
                content: '# 简单测试内容\n\n## 这是一个简单的标题\n\n这是一个测试段落，用于验证API是否正常工作。\n\n### 子标题\n\n- 列表项目1\n- 列表项目2\n- 列表项目3\n\n这是另一个段落，**包含加粗文字**和*斜体文字*。'
            }
        };

        // 加载风格测试用例
        function loadStyleCase(type) {
            const styleCase = stylesCases[type];
            if (styleCase) {
                document.getElementById('themeName').value = styleCase.themeName;
                document.getElementById('themeDescription').value = styleCase.themeDescription;
                
                // 如果是简单测试，使用简短的内容；否则使用FlowEdit完整介绍
                if (type === 'simple' && styleCase.content) {
                    const textarea = document.getElementById('rawContent');
                    textarea.value = styleCase.content;
                    textarea.removeAttribute('readonly');
                    textarea.style.background = '#ffffff';
                    textarea.style.color = '#000000';
                    showStatus('已加载简单测试用例: ' + styleCase.themeName + ' (使用简短内容，可编辑)', 'success');
                } else {
                    // 内容保持不变，使用固定的FlowEdit介绍，并设为只读
                    const textarea = document.getElementById('rawContent');
                    textarea.setAttribute('readonly', 'true');
                    textarea.style.background = '#f8fafc';
                    textarea.style.color = '#6b7280';
                    showStatus('已加载风格用例: ' + styleCase.themeName, 'success');
                }
            }
        }

        // 显示状态
        function showStatus(message, type = 'loading') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // 显示结果
        function showResult(data, isSuccess = true) {
            const resultDiv = document.getElementById('result');
            const previewSection = document.getElementById('previewSection');
            
            resultDiv.style.display = 'block';
            resultDiv.className = `result ${isSuccess ? 'success' : 'error'}`;
            
            if (isSuccess && data.html_content) {
                // 只显示大模型返回的HTML内容
                resultDiv.textContent = data.html_content;
                previewSection.style.display = 'block';
                document.getElementById('htmlPreview').innerHTML = data.html_content;
            } else {
                // 错误时显示完整响应
                resultDiv.textContent = JSON.stringify(data, null, 2);
                previewSection.style.display = 'none';
            }
        }

        // 执行API测试
        async function testCreateStyle() {
            const btn = document.getElementById('testBtn');
            btn.disabled = true;
            btn.textContent = '⏳ 正在测试...';
            
            showStatus('正在发送请求到 Create Style API...', 'loading');
            
            try {
                const requestData = {
                    raw_content: document.getElementById('rawContent').value,
                    theme_name: document.getElementById('themeName').value,
                    theme_description: document.getElementById('themeDescription').value
                };

                console.log('发送请求:', requestData);
                
                const response = await fetch(`${currentApiBase}/v1/styles/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                const result = await response.json();
                console.log('收到响应:', result);

                if (response.ok) {
                    showStatus('✅ API测试成功完成！', 'success');
                    showResult(result, true);
                } else {
                    showStatus(`❌ API测试失败: ${response.status}`, 'error');
                    showResult(result, false);
                }

            } catch (error) {
                console.error('请求错误:', error);
                showStatus('❌ 网络请求失败: ' + error.message, 'error');
                showResult({ error: error.message, stack: error.stack }, false);
            } finally {
                btn.disabled = false;
                btn.textContent = '🎨 创建风格主题 (基于FlowEdit内容)';
            }
        }

        // 页面加载时显示提示
        window.onload = function() {
            showStatus('准备就绪！内容已预设FlowEdit产品介绍，选择风格开始测试', 'success');
            // 默认加载极简商务风格
            loadStyleCase('minimal');
        };
    </script>
</body>
</html>