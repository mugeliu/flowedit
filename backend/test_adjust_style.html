<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯• Adjust Style API</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: #fef7ff; 
            padding: 20px;
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header { 
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%); 
            color: white; 
            padding: 30px; 
            text-align: center; 
        }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 16px; }
        .content { padding: 30px; }
        .test-section { 
            border: 1px solid #e1e8ed; 
            border-radius: 8px; 
            margin-bottom: 25px; 
            overflow: hidden;
        }
        .section-header { 
            background: #faf5ff; 
            padding: 15px 20px; 
            border-bottom: 1px solid #e1e8ed; 
            font-weight: 600; 
            color: #7c2d12;
        }
        .section-content { padding: 20px; }
        .form-group { margin-bottom: 20px; }
        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 500; 
            color: #374151; 
        }
        input, textarea, select { 
            width: 100%; 
            padding: 12px 16px; 
            border: 2px solid #e5e7eb; 
            border-radius: 8px; 
            font-size: 14px; 
            transition: all 0.3s;
        }
        input:focus, textarea:focus, select:focus { 
            outline: none; 
            border-color: #a855f7; 
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }
        textarea { 
            min-height: 100px; 
            resize: vertical; 
            font-family: inherit;
        }
        .btn { 
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%); 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 16px;
            transition: all 0.3s;
            margin-right: 10px;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(168, 85, 247, 0.3); }
        .btn:disabled { 
            background: #9ca3af; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none; 
        }
        .btn.secondary { 
            background: #6b7280; 
        }
        .btn.secondary:hover { 
            background: #4b5563; 
            box-shadow: 0 8px 25px rgba(107, 114, 128, 0.3);
        }
        .result { 
            background: #f8fafc; 
            border: 1px solid #e5e7eb; 
            border-radius: 8px; 
            padding: 20px; 
            margin-top: 20px; 
            white-space: pre-wrap; 
            font-family: 'Monaco', 'Courier New', monospace; 
            font-size: 12px; 
            max-height: 400px; 
            overflow-y: auto;
        }
        .success { border-color: #10b981; background-color: #ecfdf5; }
        .error { border-color: #ef4444; background-color: #fef2f2; }
        .warning { border-color: #f59e0b; background-color: #fffbeb; }
        .status { 
            padding: 8px 12px; 
            border-radius: 6px; 
            font-size: 12px; 
            font-weight: 600; 
            margin-bottom: 15px;
        }
        .status.loading { background: #dbeafe; color: #1d4ed8; }
        .status.success { background: #dcfce7; color: #166534; }
        .status.error { background: #fee2e2; color: #991b1b; }
        .theme-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 10px; 
            margin-bottom: 20px; 
        }
        .theme-card { 
            background: #f3f4f6; 
            padding: 15px 10px; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s; 
            text-align: center;
            border: 2px solid transparent;
        }
        .theme-card:hover { 
            background: #e5e7eb; 
            border-color: #a855f7;
        }
        .theme-card.selected { 
            background: #f3e8ff; 
            border-color: #a855f7; 
            color: #7c2d12;
        }
        .theme-card .name { font-weight: 600; font-size: 13px; }
        .theme-card .desc { font-size: 11px; margin-top: 5px; opacity: 0.7; }
        .api-info { 
            background: #fdf4ff; 
            border-left: 4px solid #a855f7; 
            padding: 15px; 
            margin-bottom: 25px; 
            border-radius: 0 8px 8px 0;
        }
        .info-note {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            font-size: 14px;
        }
        .quick-adjustments { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
            gap: 10px; 
            margin-bottom: 20px; 
        }
        .quick-adjustment { 
            background: #faf5ff; 
            padding: 12px; 
            border-radius: 6px; 
            cursor: pointer; 
            transition: all 0.2s; 
            text-align: center;
            font-size: 13px;
            border: 1px solid #e9d5ff;
        }
        .quick-adjustment:hover { background: #f3e8ff; border-color: #a855f7; }
        .example-section {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        .example-header {
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        .example-content {
            font-size: 13px;
            color: #6b7280;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›ï¸ Adjust Style API æµ‹è¯•å™¨</h1>
            <p>è°ƒæ•´å’Œä¼˜åŒ–å·²æœ‰é£æ ¼ä¸»é¢˜çš„æ ·å¼é…ç½®</p>
        </div>

        <div class="content">
            <div class="api-info">
                <strong>APIç«¯ç‚¹:</strong> POST /api/v1/styles/adjust<br>
                <strong>åŠŸèƒ½:</strong> æ ¹æ®è°ƒæ•´è¦æ±‚ä¿®æ”¹å·²æœ‰é£æ ¼ä¸»é¢˜çš„æ ·å¼DNAé…ç½®<br>
                <strong>å‰æ:</strong> éœ€è¦å…ˆä½¿ç”¨ Create Style API åˆ›å»ºé£æ ¼ä¸»é¢˜
            </div>

            <div class="info-note">
                ğŸ’¡ <strong>ä½¿ç”¨è¯´æ˜:</strong> æ­¤APIç”¨äºå¾®è°ƒå·²åˆ›å»ºçš„é£æ ¼ä¸»é¢˜ï¼Œå¦‚è°ƒæ•´é¢œè‰²ã€å­—ä½“å¤§å°ã€é—´è·ç­‰æ ·å¼å±æ€§ã€‚
            </div>

            <div class="test-section">
                <div class="section-header">ğŸ“ APIé…ç½®</div>
                <div class="section-content">
                    <div class="form-group">
                        <label for="apiBase">APIåŸºç¡€åœ°å€</label>
                        <input type="text" id="apiBase" value="http://localhost:8000/api" placeholder="http://localhost:8000/api">
                    </div>
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">ğŸ“š å¯ç”¨ä¸»é¢˜</div>
                <div class="section-content">
                    <button class="btn secondary" onclick="loadThemes()">ğŸ”„ åˆ·æ–°ä¸»é¢˜åˆ—è¡¨</button>
                    <div id="themesStatus" class="status" style="display:none;"></div>
                    <div class="theme-grid" id="themeGrid">
                        <div class="theme-card" onclick="selectTheme('æµ‹è¯•é£æ ¼')">
                            <div class="name">æµ‹è¯•é£æ ¼</div>
                            <div class="desc">é»˜è®¤æµ‹è¯•ä¸»é¢˜</div>
                        </div>
                    </div>
                    <input type="hidden" id="selectedTheme" value="æµ‹è¯•é£æ ¼">
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">ğŸš€ å¿«é€Ÿè°ƒæ•´é€‰é¡¹</div>
                <div class="section-content">
                    <div class="quick-adjustments">
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('larger')">å­—ä½“æ”¾å¤§</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('smaller')">å­—ä½“ç¼©å°</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('darker')">é¢œè‰²åŠ æ·±</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('lighter')">é¢œè‰²å˜æµ…</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('spacing')">å¢åŠ é—´è·</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('compact')">ç´§å‡‘å¸ƒå±€</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('colorful')">è‰²å½©ä¸°å¯Œ</div>
                        <div class="quick-adjustment" onclick="loadAdjustmentCase('minimal')">æç®€é£æ ¼</div>
                    </div>

                    <div class="example-section">
                        <div class="example-header">è°ƒæ•´è¯·æ±‚ç¤ºä¾‹ï¼š</div>
                        <div class="example-content">
                            â€¢ "æŠŠæ ‡é¢˜å­—ä½“è°ƒå¤§ä¸€äº›ï¼Œé¢œè‰²æ”¹æˆæ·±è“è‰²"<br>
                            â€¢ "æ•´ä½“é£æ ¼æ”¹æˆæ›´ç®€æ´çš„æ ·å¼ï¼Œå‡å°‘è£…é¥°å…ƒç´ "<br>
                            â€¢ "å¢åŠ æ®µè½é—´è·ï¼Œè®©å†…å®¹æ›´é€æ°”"<br>
                            â€¢ "æŠŠé…è‰²æ–¹æ¡ˆæ”¹æˆæš–è‰²è°ƒ"
                        </div>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">ğŸ“‹ è¯·æ±‚å‚æ•°</div>
                <div class="section-content">
                    <div class="form-group">
                        <label for="themeName">ä¸»é¢˜åç§° (theme_name)</label>
                        <input type="text" id="themeName" placeholder="é€‰æ‹©ä¸€ä¸ªå·²åˆ›å»ºçš„ä¸»é¢˜" value="æµ‹è¯•é£æ ¼" readonly>
                        <small style="color: #6b7280;">ä»ä¸Šé¢çš„ä¸»é¢˜åˆ—è¡¨ä¸­é€‰æ‹©è¦è°ƒæ•´çš„ä¸»é¢˜</small>
                    </div>

                    <div class="form-group">
                        <label for="adjustmentRequest">è°ƒæ•´è¦æ±‚ (adjustment_request)</label>
                        <textarea id="adjustmentRequest" placeholder="è¯¦ç»†æè¿°ä½ å¸Œæœ›å¦‚ä½•è°ƒæ•´è¿™ä¸ªé£æ ¼ä¸»é¢˜...">æŠŠå­—ä½“è°ƒå¤§ä¸€ç‚¹ï¼Œé¢œè‰²æ”¹æˆæ›´æ·±çš„è“è‰²ç³»ï¼Œå¢åŠ ä¸€äº›æ®µè½é—´è·è®©å†…å®¹çœ‹èµ·æ¥æ›´æ¸…çˆ½</textarea>
                        <small style="color: #6b7280;">
                            å¯ä»¥æè¿°é¢œè‰²ã€å­—ä½“å¤§å°ã€é—´è·ã€å¸ƒå±€ç­‰æ–¹é¢çš„è°ƒæ•´éœ€æ±‚
                        </small>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <div class="section-header">ğŸ”§ æ‰§è¡Œæµ‹è¯•</div>
                <div class="section-content">
                    <button class="btn" onclick="testAdjustStyle()" id="testBtn">
                        ğŸ›ï¸ æ‰§è¡Œ Adjust Style API æµ‹è¯•
                    </button>
                    
                    <div id="status"></div>
                    <div id="result" class="result" style="display: none;"></div>
                </div>
            </div>

            <div class="test-section" id="comparisonSection" style="display: none;">
                <div class="section-header">ğŸ” è°ƒæ•´å‰åå¯¹æ¯”</div>
                <div class="section-content">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <div class="example-header">è°ƒæ•´å‰çš„æ ·å¼DNA:</div>
                            <div id="originalStyle" class="example-section" style="font-family: 'Monaco', 'Courier New', monospace; font-size: 11px; white-space: pre-wrap;"></div>
                        </div>
                        <div>
                            <div class="example-header">è°ƒæ•´åçš„æ ·å¼DNA:</div>
                            <div id="adjustedStyle" class="example-section" style="font-family: 'Monaco', 'Courier New', monospace; font-size: 11px; white-space: pre-wrap;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentApiBase = 'http://localhost:8000/api';
        let availableThemes = [];
        let originalStyleDNA = null;

        // æ›´æ–°APIåŸºç¡€åœ°å€
        document.getElementById('apiBase').addEventListener('change', function() {
            currentApiBase = this.value;
        });

        // è°ƒæ•´è¯·æ±‚æ¡ˆä¾‹
        const adjustmentCases = {
            larger: {
                request: "æŠŠæ‰€æœ‰å­—ä½“éƒ½è°ƒå¤§ä¸€äº›ï¼Œæ ‡é¢˜å­—ä½“å¢åŠ åˆ°28pxï¼Œæ®µè½å­—ä½“å¢åŠ åˆ°18pxï¼Œè®©å†…å®¹æ›´å®¹æ˜“é˜…è¯»"
            },
            smaller: {
                request: "æŠŠå­—ä½“è°ƒå°ä¸€ç‚¹ï¼Œä½¿ç”¨æ›´ç´§å‡‘çš„æ’ç‰ˆï¼Œæ ‡é¢˜20pxï¼Œæ®µè½14pxï¼Œé€‚åˆç§»åŠ¨ç«¯é˜…è¯»"
            },
            darker: {
                request: "æŠŠæ‰€æœ‰æ–‡å­—é¢œè‰²è°ƒæ·±ä¸€äº›ï¼Œæé«˜å¯¹æ¯”åº¦ï¼Œæ ‡é¢˜ä½¿ç”¨æ·±ç°è‰²#2c3e50ï¼Œæ®µè½ä½¿ç”¨#374151"
            },
            lighter: {
                request: "ä½¿ç”¨æ›´æµ…çš„é¢œè‰²æ­é…ï¼Œæ ‡é¢˜æ”¹æˆæµ…ç°è‰²#6b7280ï¼Œæ®µè½ä½¿ç”¨#9ca3afï¼Œè¥é€ è½»æ¾çš„æ„Ÿè§‰"
            },
            spacing: {
                request: "å¢åŠ å„å…ƒç´ ä¹‹é—´çš„é—´è·ï¼Œæ®µè½é—´è·è°ƒæ•´ä¸º24pxï¼Œæ ‡é¢˜ä¸Šä¸‹è¾¹è·å¢åŠ åˆ°30pxï¼Œè®©å¸ƒå±€æ›´é€æ°”"
            },
            compact: {
                request: "é‡‡ç”¨æ›´ç´§å‡‘çš„å¸ƒå±€ï¼Œå‡å°‘æ‰€æœ‰é—´è·ï¼Œæ®µè½é—´è·è°ƒæ•´ä¸º12pxï¼Œæ ‡é¢˜é—´è·è°ƒæ•´ä¸º16px"
            },
            colorful: {
                request: "ä½¿ç”¨æ›´ä¸°å¯Œçš„é¢œè‰²æ­é…ï¼Œæ ‡é¢˜ä½¿ç”¨è“è‰²#3b82f6ï¼Œå¼ºè°ƒæ–‡å­—ä½¿ç”¨çº¢è‰²#ef4444ï¼Œåˆ—è¡¨ä½¿ç”¨ç»¿è‰²#10b981"
            },
            minimal: {
                request: "æ”¹æˆæç®€é£æ ¼ï¼Œåªä½¿ç”¨é»‘ç™½ç°ä¸‰ç§é¢œè‰²ï¼Œå»æ‰æ‰€æœ‰è£…é¥°æ€§æ ·å¼ï¼Œä¸“æ³¨äºå†…å®¹çš„å¯è¯»æ€§"
            }
        };

        // åŠ è½½è°ƒæ•´æ¡ˆä¾‹
        function loadAdjustmentCase(type) {
            const testCase = adjustmentCases[type];
            if (testCase) {
                document.getElementById('adjustmentRequest').value = testCase.request;
                showStatus('å·²åŠ è½½è°ƒæ•´æ¡ˆä¾‹: ' + type, 'success');
            }
        }

        // åŠ è½½ä¸»é¢˜åˆ—è¡¨
        async function loadThemes() {
            const statusDiv = document.getElementById('themesStatus');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = '<div class="status loading">æ­£åœ¨åŠ è½½ä¸»é¢˜åˆ—è¡¨...</div>';

            try {
                const response = await fetch(`${currentApiBase}/v1/styles/themes`);
                const result = await response.json();

                if (response.ok && result.themes) {
                    availableThemes = result.themes;
                    renderThemes(result.themes);
                    statusDiv.innerHTML = '<div class="status success">âœ… å·²åŠ è½½ ' + result.themes.length + ' ä¸ªä¸»é¢˜</div>';
                } else {
                    statusDiv.innerHTML = '<div class="status error">âŒ åŠ è½½ä¸»é¢˜å¤±è´¥</div>';
                    renderThemes([]);
                }
            } catch (error) {
                statusDiv.innerHTML = '<div class="status error">âŒ ç½‘ç»œé”™è¯¯: ' + error.message + '</div>';
                renderThemes([]);
            }

            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }

        // æ¸²æŸ“ä¸»é¢˜ç½‘æ ¼
        function renderThemes(themes) {
            const themeGrid = document.getElementById('themeGrid');
            
            if (themes.length === 0) {
                themeGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 20px; color: #6b7280;">
                        ğŸ˜” æš‚æ— å¯ç”¨ä¸»é¢˜ï¼Œè¯·å…ˆä½¿ç”¨ Create Style API åˆ›å»ºä¸»é¢˜
                    </div>
                `;
                return;
            }

            themeGrid.innerHTML = themes.map(theme => `
                <div class="theme-card" onclick="selectTheme('${theme}')">
                    <div class="name">${theme}</div>
                    <div class="desc">ç‚¹å‡»é€‰æ‹©è°ƒæ•´</div>
                </div>
            `).join('');
        }

        // é€‰æ‹©ä¸»é¢˜
        function selectTheme(themeName) {
            // æ›´æ–°UIçŠ¶æ€
            document.querySelectorAll('.theme-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            event.target.closest('.theme-card').classList.add('selected');
            
            // æ›´æ–°è¡¨å•
            document.getElementById('selectedTheme').value = themeName;
            document.getElementById('themeName').value = themeName;
            
            showStatus('å·²é€‰æ‹©ä¸»é¢˜: ' + themeName, 'success');
            
            // æ¸…ç©ºä¹‹å‰çš„å¯¹æ¯”æ•°æ®
            originalStyleDNA = null;
            document.getElementById('comparisonSection').style.display = 'none';
        }

        // æ˜¾ç¤ºçŠ¶æ€
        function showStatus(message, type = 'loading') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(data, isSuccess = true, originalData = null) {
            const resultDiv = document.getElementById('result');
            const comparisonSection = document.getElementById('comparisonSection');
            
            resultDiv.style.display = 'block';
            resultDiv.className = `result ${isSuccess ? 'success' : 'error'}`;
            
            if (isSuccess && data.html_content) {
                // åªæ˜¾ç¤ºå¤§æ¨¡å‹è¿”å›çš„HTMLå†…å®¹
                resultDiv.textContent = data.html_content;
                
                // å¦‚æœæœ‰å¯¹æ¯”æ•°æ®ï¼Œæ˜¾ç¤ºå¯¹æ¯”
                if (data.style_dna && originalData) {
                    comparisonSection.style.display = 'block';
                    document.getElementById('originalStyle').textContent = JSON.stringify(originalData, null, 2);
                    document.getElementById('adjustedStyle').textContent = JSON.stringify(data.style_dna, null, 2);
                }
            } else {
                // é”™è¯¯æ—¶æ˜¾ç¤ºå®Œæ•´å“åº”
                resultDiv.textContent = JSON.stringify(data, null, 2);
            }
        }

        // è·å–åŸå§‹æ ·å¼DNAï¼ˆç”¨äºå¯¹æ¯”ï¼‰
        async function getOriginalStyleDNA(themeName) {
            try {
                // é€šè¿‡åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„applyè¯·æ±‚æ¥è·å–å½“å‰çš„style_dna
                const response = await fetch(`${currentApiBase}/v1/styles/apply`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        raw_content: "# ä¸´æ—¶å†…å®¹\nç”¨äºè·å–åŸå§‹æ ·å¼DNA",
                        theme_name: themeName
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    return result.style_dna;
                }
            } catch (error) {
                console.log('è·å–åŸå§‹æ ·å¼DNAå¤±è´¥:', error);
            }
            return null;
        }

        // æ‰§è¡ŒAPIæµ‹è¯•
        async function testAdjustStyle() {
            const btn = document.getElementById('testBtn');
            const themeName = document.getElementById('themeName').value;
            const adjustmentRequest = document.getElementById('adjustmentRequest').value;
            
            if (!themeName) {
                showStatus('âŒ è¯·é€‰æ‹©ä¸€ä¸ªä¸»é¢˜', 'error');
                return;
            }
            
            if (!adjustmentRequest.trim()) {
                showStatus('âŒ è¯·è¾“å…¥è°ƒæ•´è¦æ±‚', 'error');
                return;
            }

            btn.disabled = true;
            btn.textContent = 'â³ æ­£åœ¨æµ‹è¯•...';
            
            showStatus('æ­£åœ¨è·å–åŸå§‹æ ·å¼æ•°æ®...', 'loading');
            
            try {
                // å…ˆè·å–åŸå§‹æ ·å¼DNAç”¨äºå¯¹æ¯”
                originalStyleDNA = await getOriginalStyleDNA(themeName);
                
                showStatus('æ­£åœ¨å‘é€è°ƒæ•´è¯·æ±‚åˆ° Adjust Style API...', 'loading');
                
                const requestData = {
                    theme_name: themeName,
                    adjustment_request: adjustmentRequest
                };

                console.log('å‘é€è¯·æ±‚:', requestData);
                
                const response = await fetch(`${currentApiBase}/v1/styles/adjust`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                const result = await response.json();
                console.log('æ”¶åˆ°å“åº”:', result);

                if (response.ok) {
                    showStatus('âœ… APIæµ‹è¯•æˆåŠŸå®Œæˆï¼é£æ ¼å·²è°ƒæ•´', 'success');
                    showResult(result, true, originalStyleDNA);
                } else {
                    showStatus(`âŒ APIæµ‹è¯•å¤±è´¥: ${response.status} - ${result.detail || 'æœªçŸ¥é”™è¯¯'}`, 'error');
                    showResult(result, false);
                }

            } catch (error) {
                console.error('è¯·æ±‚é”™è¯¯:', error);
                showStatus('âŒ ç½‘ç»œè¯·æ±‚å¤±è´¥: ' + error.message, 'error');
                showResult({ error: error.message, stack: error.stack }, false);
            } finally {
                btn.disabled = false;
                btn.textContent = 'ğŸ›ï¸ æ‰§è¡Œ Adjust Style API æµ‹è¯•';
            }
        }

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        window.onload = function() {
            showStatus('å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æµ‹è¯• Adjust Style API', 'success');
            loadThemes(); // è‡ªåŠ¨åŠ è½½ä¸»é¢˜åˆ—è¡¨
        };
    </script>
</body>
</html>