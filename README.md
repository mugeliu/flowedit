# 微信公众号浮动工具栏

一个Chrome扩展程序，为微信公众号编辑器提供浮动工具栏功能，帮助用户快速应用标题和格式化样式。

## 功能特点

- 在选中文本时显示浮动工具栏，快速应用标题样式（H1-H4）和行内代码样式
- 可拖动的悬浮设置按钮，可以自由移动并自动吸附到屏幕边缘
- 自定义样式设置面板，可以调整标题和代码的样式
- 支持自定义CSS，可以完全控制编辑器中的样式
- 使用Rollup构建系统，保持模块化开发的同时确保最终代码的兼容性

## 项目结构

```
flowedit/
├── assets/                    # 静态资源
│   └── icons/                 # 图标文件
├── build/                     # 构建输出目录
├── src/                       # 源代码
│   ├── background/            # 背景脚本
│   │   └── background.js      # 背景脚本入口文件
│   ├── content/               # 内容脚本
│   │   ├── components/        # UI组件
│   │   │   ├── FloatingToolbar.js  # 浮动工具栏组件
│   │   │   ├── SettingsPanel.js    # 设置面板组件
│   │   │   └── DraggableButton.js  # 可拖动按钮组件
│   │   ├── styles/            # 样式文件
│   │   │   ├── toolbar.css    # 工具栏样式
│   │   │   ├── settings.css   # 设置面板样式
│   │   │   └── draggable.css  # 可拖动按钮样式
│   │   ├── utils/             # 工具函数
│   │   │   ├── dom.js         # DOM操作工具
│   │   │   └── storage.js     # 存储工具
│   │   └── content.js         # 内容脚本入口文件
│   └── libs/                  # 第三方库
├── build.sh                   # 构建脚本
├── package.json               # 项目依赖和脚本
├── rollup.config.js           # Rollup构建配置
└── manifest.json              # 扩展清单文件
```

## 技术栈

- 原生JavaScript（ES6+）
- CSS3
- Chrome Extension API
- ES模块系统
- Rollup（构建工具）

## 安装方法

### 开发模式安装

1. 克隆或下载本仓库到本地
2. 安装依赖并构建项目：
   ```bash
   npm install
   ./build.sh
   ```
3. 打开Chrome浏览器，进入扩展程序页面（chrome://extensions/）
4. 开启“开发者模式”
5. 点击“加载已解压的扩展程序”
6. 选择项目的 `build` 目录

### 从Chrome商店安装（如果已发布）

1. 访问Chrome网上应用店
2. 搜索"微信公众号浮动工具栏"
3. 点击"添加到Chrome"

## 使用方法

1. 安装扩展后，访问微信公众号编辑页面（https://mp.weixin.qq.com/cgi-bin/appmsg）
2. 页面右侧会出现一个可拖动的设置按钮
3. 在编辑器中选中文本，会出现浮动工具栏
4. 点击工具栏上的按钮应用相应样式
5. 点击设置按钮可以自定义样式

## 自定义样式

1. 点击悬浮设置按钮打开设置面板
2. 在"基本设置"标签页中可以调整标题和代码的样式
3. 在"自定义CSS"标签页中可以输入自定义CSS代码
4. 点击"预览样式"可以实时查看效果
5. 点击"保存设置"保存修改

## 开发指南

### 添加新功能

1. 在适当的组件文件中添加新功能代码
2. 如果需要新的UI组件，在components目录下创建新文件
3. 如果需要新的样式，在styles目录下创建新文件
4. 在content.js中引入并初始化新组件
5. 运行构建脚本生成最终代码

### 构建与打包

项目使用Rollup构建系统，可以将模块化的代码打包成单一文件，以便在Chrome扩展中使用。

#### 开发流程

1. 修改源代码（src目录下）
2. 运行构建脚本生成打包文件：
   ```bash
   ./build.sh
   ```
3. 加载`build`目录到Chrome扩展中进行测试

#### 发布打包

1. 确保所有代码已经测试并正常工作
2. 运行构建脚本生成最终打包文件：
   ```bash
   ./build.sh
   ```
3. 压缩`build`目录为ZIP文件
4. 在Chrome开发者控制台上传ZIP文件

## 贡献指南

欢迎提交Pull Request或Issue来改进这个项目。在提交PR前，请确保：

1. 代码风格一致
2. 功能正常工作
3. 没有不必要的依赖
4. 添加了适当的注释和文档

## 许可证

[MIT License](LICENSE)

## 联系方式

如有问题或建议，请提交Issue或联系项目维护者。
